{% if collection.metafields.global['alt-title'] %}
  <h1 class="collection-hero__title page-width alt">
    {{- collection.metafields.global['alt-title'] | escape -}}
  </h1>
{% endif %}

{% if collection.metafields.global.full_description %}
  {% render 'collection-long-description' %}
{% endif %}

<!-- Sale filter banners START -->
<style>
  .sale-filter-wrap {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
    margin: 18px 0 28px
  }
  .sale-filter {
    background: #ff3b30;
    color: #fff;
    padding: 10px 16px;
    border-radius: 8px;
    cursor: pointer;
    border: none;
    font-weight: 700;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.12)
  }
  .sale-filter.active {
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.18);
    transform: translateY(-2px)
  }
  .sale-filter.reset {
    background: #666
  }
</style>
<div class="sale-filter-wrap page-width">
  <button
    class="sale-filter"
    data-min="1"
    data-max="25">Up to 25% off</button>
  <button
    class="sale-filter"
    data-min="26"
    data-max="35">26% - 35% off</button>
  <button
    class="sale-filter"
    data-min="36"
    data-max="100">36% - 100% off</button>
  <button class="sale-filter reset" data-reset="true">Show all</button>
</div>
<script>
  (function(){
    function applySaleFilter(min, max){
      var $cards = $('.card-wrapper.product-card-wrapper');
      var shown = 0;
      $cards.each(function(){
        var d = parseInt($(this).find('[data-discount]').attr('data-discount') || '0', 10);
        if(!isNaN(d) && d >= min && d <= max){
          $(this).show(); shown += 1;
        } else {
          $(this).hide();
        }
      });
      // optional: update visible count if your theme exposes an element
      if($('.collection-product-count').length){
        $('.collection-product-count').text(shown + ' products');
      }
      // scroll to products grid
      if($('.collection-products').length){
        $('html, body').animate({scrollTop: $('.collection-products').offset().top - 120}, 400);
      }
    }
  
    $(document).on('click', '.sale-filter', function(e){
      e.preventDefault();
      var $btn = $(this);
      if($btn.data('reset')){
        $('.card-wrapper.product-card-wrapper').show();
        $('.sale-filter').removeClass('active');
        return;
      }
      var min = parseInt($btn.data('min'), 10) || 0;
      var max = parseInt($btn.data('max'), 10) || 999;
      $('.sale-filter').removeClass('active');
      $btn.addClass('active');
      applySaleFilter(min, max);
    });
  })();
</script>
<!-- Sale filter banners END -->


{% schema %}
  {
    "name": "Long Description",
    "tag": "section",
    "settings": [
      {
        "type": "range",
        "id": "padding_top",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "t:sections.all.padding.padding_top",
        "default": 0
      }, {
        "type": "range",
        "id": "padding_bottom",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "t:sections.all.padding.padding_bottom",
        "default": 0
      }
    ],
    "presets": [
      {
        "name": "Long Description"
      }
    ]
  }
{% endschema %}